<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Climate Action Pledge Microsite</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #f4fdfd;
        color: #222;
      }
      .main-wrapper {
        max-width: 600px;
        margin: 0 auto;
        background: #fff;
        border-radius: 14px;
        box-shadow: 0 3px 16px #d6eced;
        padding: 24px 16px;
      }
      .hero {
        text-align: center;
        padding: 20px 0;
      }
      .hero h1 {
        color: #0a635d;
        font-size: 2rem;
        margin-bottom: 10px;
      }
      .hero button {
        background: #00a387;
        color: #fff;
        font-size: 1.1rem;
        border: none;
        padding: 10px 22px;
        border-radius: 8px;
        cursor: pointer;
      }
      .metrics {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-bottom: 16px;
      }
      .metric {
        background: #ceeedd;
        padding: 18px 12px;
        border-radius: 8px;
        text-align: center;
        flex: 1;
      }
      .impact-section {
        text-align: center;
        margin: 18px 0 16px 0;
        padding: 8px 0;
      }
      .pledge-form,
      .certificate,
      .pledge-wall,
      .privacy-note {
        margin: 18px 0;
      }
      .pledge-form {
        display: none;
        background: #eaf9fa;
        padding: 18px 10px;
        border-radius: 8px;
      }
      .pledge-form label {
        display: block;
        margin: 6px 0 2px 0;
      }
      .pledge-form input,
      .pledge-form select {
        width: 98%;
        padding: 7px;
        margin-bottom: 12px;
        border: 1px solid #bbb;
        border-radius: 6px;
      }
      .pledge-form .actions {
        text-align: right;
      }
      .pledge-form button {
        background: #00a387;
        color: #fff;
        border: none;
        border-radius: 6px;
        padding: 8px 16px;
        cursor: pointer;
      }
      .certificate {
        display: none;
        text-align: center;
        background: #def6e1;
        border-radius: 10px;
        padding: 24px 10px;
      }
      .certificate h3 {
        color: #13b17a;
      }
      .pledge-wall {
        background: #ecf7fa;
        padding: 10px;
        border-radius: 10px;
      }
      .pledge-item {
        border-bottom: 1px solid #cce7ea;
        padding: 8px;
        font-size: 0.96rem;
      }
      .privacy-note {
        font-size: 0.93rem;
        color: #5e6363;
        text-align: center;
      }
      @media (max-width: 650px) {
        .main-wrapper {
          padding: 8px 2vw;
        }
        .metrics {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <div class="main-wrapper">
      
      <div class="hero">
        <h1>Take the Climate Action Pledge!</h1>
        <p>
          Together, let's make individual climate action visible and impactful.
        </p>
        <button onclick="showPledgeForm()">Take the Pledge</button>
      </div>

      
      <div class="metrics" id="metrics">
        <div class="metric">
          <strong id="countTotal">0</strong> Total Pledges
        </div>
        <div class="metric"><strong id="countStudents">0</strong> Students</div>
        <div class="metric">
          <strong id="countProfessionals">0</strong> Professionals
        </div>
      </div>
      <div class="impact-section">
        <b>Every pledge counts!</b> Even small actions—when multiplied—shape a better world for us all.
      </div>

    
      <form class="pledge-form" id="pledgeForm" onsubmit="submitPledge(event)">
        <label>Name*</label> <input type="text" id="name" required />
        <label>Email*</label> <input type="email" id="email" required />
        <label>Mobile*</label>
        <input type="text" id="mobile" required pattern="[0-9]{10}" />
        <label>State*</label>
        <select id="state" required>
          <option value="">Select</option>
          <option>Tamil Nadu</option>
          <option>Kerala</option>
          <option>Karnataka</option>
          <option>Andhra Pradesh</option>
          <option>Other</option>
        </select>
        <label>Profile*</label>
        <select id="profile" required>
          <option value="">Select</option>
          <option>Student</option>
          <option>Professional</option>
          <option>Other</option>
        </select>
        <label>Climate Commitments (choose all that apply):</label>
        <div>
          <input type="checkbox" id="water" value="Save Water" />
          <label for="water">Save Water</label>
          <input
            type="checkbox"
            id="plastic"
            value="Reduce Single-use Plastic"
          />
          <label for="plastic">Reduce Plastic</label>
          <input type="checkbox" id="recycle" value="Recycle More" />
          <label for="recycle">Recycle More</label>
          <input type="checkbox" id="energy" value="Save Energy" />
          <label for="energy">Save Energy</label>
          <input type="checkbox" id="trees" value="Grow More Trees" />
          <label for="trees">Grow More Trees</label>
        </div>
        <div class="actions">
          <button type="submit">Get My Certificate</button>
        </div>
      </form>

      
      <div class="certificate" id="certificate">
        <h3>Certificate of Climate Commitment</h3>
        <p id="certText"></p>
        <div><b>Cool Enough to Care!</b></div>
        <div style="margin-top: 8px; color: #888" id="certDate"></div>
        <button onclick="closeCertificate()">OK</button>
      </div>

      
      <div class="pledge-wall">
        <b>Latest Pledges</b>
        <div id="wall"></div>
      </div>

      
      <div class="privacy-note">
        <b>Note:</b> Emails and mobiles are only used for validation. They are never displayed publicly.
      </div>
    </div>

    <script>
      let pledges = [];
      function showPledgeForm() {
        document.getElementById("pledgeForm").style.display = "block";
        window.scrollTo({
          top: document.getElementById("pledgeForm").offsetTop,
          behavior: "smooth",
        });
      }
      function submitPledge(e) {
        e.preventDefault();
        const name = document.getElementById("name").value.trim();
        const email = document.getElementById("email").value.trim();
        const mobile = document.getElementById("mobile").value.trim();
        const state = document.getElementById("state").value;
        const profile = document.getElementById("profile").value;
        const commitments = [];
        ["water", "plastic", "recycle", "energy", "trees"].forEach((id) => {
          if (document.getElementById(id).checked)
            commitments.push(document.getElementById(id).value);
        });
        
        const pledge = {
          id: "PLG" + ("" + Math.floor(Math.random() * 1e6)).padStart(6, "0"),
          name,
          state,
          profile,
          commitments: commitments.join(", "),
          date: new Date().toLocaleDateString(),
        };
        pledges.unshift(pledge);
        updateMetrics();
        updateWall();
        
        document.getElementById("pledgeForm").reset();
        document.getElementById("pledgeForm").style.display = "none";
        document.getElementById("certificate").style.display = "block";
        document.getElementById(
          "certText"
        ).innerHTML = `<b>${name}</b> from <b>${state}</b> (${profile}) has pledged: ${
          commitments.length === 0
            ? "<i>No commitments selected.</i>"
            : commitments.join(", ")
        }`;
        document.getElementById("certDate").innerText =
          "Date: " + pledge.date + "\nID: " + pledge.id;
        setTimeout(() => {
          document
            .getElementById("certificate")
            .scrollIntoView({ behavior: "smooth" });
        }, 50);
      }
      function closeCertificate() {
        document.getElementById("certificate").style.display = "none";
      }
      function updateMetrics() {
        document.getElementById("countTotal").innerText = pledges.length;
        document.getElementById("countStudents").innerText = pledges.filter(
          (p) => p.profile === "Student"
        ).length;
        document.getElementById("countProfessionals").innerText = pledges.filter((p) => p.profile === "Professional").length;
      }
      function updateWall() {
        const wallElem = document.getElementById("wall");
        wallElem.innerHTML = "";
        pledges.slice(0, 7).forEach((p) => {
          const div = document.createElement("div");
          div.className = "pledge-item";
          div.innerHTML = `<b>${p.name}</b> (${p.profile}, ${p.state})<br>Commits: ${p.commitments}<br><i>${p.date} | ${p.id}</i>`;
          wallElem.appendChild(div);
        });
      }
    </script>
  </body>
</html>

